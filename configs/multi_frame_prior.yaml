# Multi-frame trajectory prior for video post-processing
#
# USE CASE: Refining video-extracted grasping poses
# - All frames show hand ALREADY grasping the object
# - Object should be centered in the palm throughout
# - Frames have slight variations (video extraction noise)
# - Optimization refines contact quality and force closure
#
# Object: Apple at origin, ~4cm radius
# Hand: Positioned so object is centered inside palm cavity

contact: {mode: uniform}

priors:
  # Frame 0: Grasping pose (slight variation)
  - translation: [0.035, 0.00, 0.00]  # Palm ~3.5cm from origin, object centered in palm
    quaternion: [0.5, 0.5, -0.5, 0.5]  # Palm facing object
    joints:
      index_joint_0: 0.0
      index_joint_1: 0.7
      index_joint_2: 0.9
      index_joint_3: 0.7
      middle_joint_0: 0.0
      middle_joint_1: 0.7
      middle_joint_2: 0.9
      middle_joint_3: 0.7
      ring_joint_0: 0.0
      ring_joint_1: 0.7
      ring_joint_2: 0.9
      ring_joint_3: 0.7
      thumb_joint_0: 1.2
      thumb_joint_1: 0.6
      thumb_joint_2: 0.7
      thumb_joint_3: 0.2

  # Frame 1: Grasping pose (slight variation - simulating video noise)
  - translation: [0.037, 0.002, 0.001]  # Tiny offset (~2mm)
    quaternion: [0.5, 0.5, -0.5, 0.5]
    joints:
      index_joint_0: 0.0
      index_joint_1: 0.72
      index_joint_2: 0.91
      index_joint_3: 0.71
      middle_joint_0: 0.0
      middle_joint_1: 0.71
      middle_joint_2: 0.91
      middle_joint_3: 0.71
      ring_joint_0: 0.0
      ring_joint_1: 0.71
      ring_joint_2: 0.91
      ring_joint_3: 0.71
      thumb_joint_0: 1.21
      thumb_joint_1: 0.61
      thumb_joint_2: 0.71
      thumb_joint_3: 0.21

  # Frame 2: Grasping pose (slight variation)
  - translation: [0.033, -0.001, 0.002]  # Tiny offset
    quaternion: [0.5, 0.5, -0.5, 0.5]
    joints:
      index_joint_0: 0.0
      index_joint_1: 0.69
      index_joint_2: 0.88
      index_joint_3: 0.69
      middle_joint_0: 0.0
      middle_joint_1: 0.69
      middle_joint_2: 0.88
      middle_joint_3: 0.69
      ring_joint_0: 0.0
      ring_joint_1: 0.69
      ring_joint_2: 0.88
      ring_joint_3: 0.69
      thumb_joint_0: 1.19
      thumb_joint_1: 0.59
      thumb_joint_2: 0.69
      thumb_joint_3: 0.19

  # Frame 3: Grasping pose (slight variation)
  - translation: [0.036, 0.001, -0.001]  # Tiny offset
    quaternion: [0.5, 0.5, -0.5, 0.5]
    joints:
      index_joint_0: 0.0
      index_joint_1: 0.71
      index_joint_2: 0.90
      index_joint_3: 0.70
      middle_joint_0: 0.0
      middle_joint_1: 0.70
      middle_joint_2: 0.90
      middle_joint_3: 0.70
      ring_joint_0: 0.0
      ring_joint_1: 0.70
      ring_joint_2: 0.90
      ring_joint_3: 0.70
      thumb_joint_0: 1.20
      thumb_joint_1: 0.60
      thumb_joint_2: 0.70
      thumb_joint_3: 0.20

# Small jitter for batch diversity (simulating video extraction noise)
jitter_translation: 0.003  # 3mm
jitter_rotation: 0.02
jitter_joints: 0.02
prior_weight: 10.0
dt: 0.1
